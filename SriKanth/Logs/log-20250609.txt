2025-06-09 09:33:27.140 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 09:33:27.572 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 09:33:27.575 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 09:33:27.701 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 09:33:27.712 +05:30 [INF] Hosting environment: Development
2025-06-09 09:33:27.721 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 09:33:29.286 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 09:33:29.676 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 413.6828ms
2025-06-09 09:33:29.696 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 09:33:29.726 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 30.767ms
2025-06-09 09:33:29.866 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 09:33:30.091 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 225.907ms
2025-06-09 09:33:30.800 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 09:33:30.826 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.5272ms
2025-06-09 09:33:30.839 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/favicon-32x32.png - null null
2025-06-09 09:33:30.871 +05:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-06-09 09:33:30.873 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/favicon-32x32.png - 200 628 image/png 34.3291ms
2025-06-09 09:35:49.720 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 09:35:49.977 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 09:35:49.981 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 09:35:50.075 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 09:35:50.077 +05:30 [INF] Hosting environment: Development
2025-06-09 09:35:50.078 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 09:35:51.308 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 09:35:51.680 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 386.2459ms
2025-06-09 09:35:51.709 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 09:35:51.722 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 13.1908ms
2025-06-09 09:35:51.795 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 09:35:51.863 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 68.0262ms
2025-06-09 09:35:52.550 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 09:35:52.589 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.182ms
2025-06-09 09:36:17.426 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/User/login - application/json 94
2025-06-09 09:36:17.652 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 09:36:17.724 +05:30 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(SriKanth.Model.Login_Module.DTOs.RequestLogin) on controller SriKanth.API.Controllers.UserController (SriKanth.API).
2025-06-09 09:36:18.344 +05:30 [INF] Login attempt started for the user with username or email: DinukaChathuranga.
2025-06-09 09:36:21.844 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:36:21.851 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:36:21.857 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:36:21.860 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:36:25.287 +05:30 [INF] Executed DbCommand (272ms) [Parameters=[@__usernameOrEmail_0='?' (Size = 100), @__usernameOrEmail_0_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__usernameOrEmail_0 OR [u].[Email] = @__usernameOrEmail_0_1
2025-06-09 09:36:25.613 +05:30 [INF] Executed DbCommand (210ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[MFASettingID], [m].[IsMFAEnabled], [m].[PreferredMFAType], [m].[UserID]
FROM [MFASetting] AS [m]
WHERE [m].[UserID] = @__userId_0
2025-06-09 09:36:25.972 +05:30 [INF] Executed DbCommand (235ms) [Parameters=[@p16='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 255), @p11='?' (Size = 50), @p12='?' (DbType = Boolean), @p13='?' (Size = 100), @p14='?' (DbType = Int32), @p15='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginCount] = @p2, [FirstName] = @p3, [IsActive] = @p4, [IsEmailVerified] = @p5, [IsLocked] = @p6, [IsPhoneNumberVerified] = @p7, [LastLoginAt] = @p8, [LastName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [RememberMe] = @p12, [SalesPersonCode] = @p13, [UserRoleId] = @p14, [Username] = @p15
OUTPUT 1
WHERE [UserID] = @p16;
2025-06-09 09:36:25.993 +05:30 [INF] Updated the last login time for user: 10.
2025-06-09 09:36:27.020 +05:30 [WRN] API Response: {
  "ip": "::1",
  "bogon": true
}
2025-06-09 09:36:27.507 +05:30 [INF] Executed DbCommand (285ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (Size = 255), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoginTrack] ([Browser], [City], [Country], [DeviceType], [FailureReason], [IPAddress], [IsSuccessful], [LoginMethod], [LoginTime], [MFAMethod], [MFAUsed], [OperatingSystem], [SessionID], [UserID])
OUTPUT INSERTED.[LoginTrackID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-09 09:36:27.916 +05:30 [INF] Executed DbCommand (309ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 09:36:27.922 +05:30 [INF] JWT token generated and stored for user 10.
2025-06-09 09:36:30.325 +05:30 [INF] Executed DbCommand (211ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 09:36:30.335 +05:30 [INF] Login successful without MFA for user: 10.
2025-06-09 09:36:30.347 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 09:36:30.364 +05:30 [INF] Executed action SriKanth.API.Controllers.UserController.Login (SriKanth.API) in 12627.6028ms
2025-06-09 09:36:30.372 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 09:36:30.383 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/User/login - 200 null application/json; charset=utf-8 12957.3498ms
2025-06-09 09:36:42.502 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/User/login - application/json 94
2025-06-09 09:36:42.547 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 09:36:42.550 +05:30 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(SriKanth.Model.Login_Module.DTOs.RequestLogin) on controller SriKanth.API.Controllers.UserController (SriKanth.API).
2025-06-09 09:36:42.579 +05:30 [INF] Login attempt started for the user with username or email: DinukaChathuranga.
2025-06-09 09:36:42.822 +05:30 [INF] Executed DbCommand (198ms) [Parameters=[@__usernameOrEmail_0='?' (Size = 100), @__usernameOrEmail_0_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__usernameOrEmail_0 OR [u].[Email] = @__usernameOrEmail_0_1
2025-06-09 09:36:43.073 +05:30 [INF] Executed DbCommand (240ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[MFASettingID], [m].[IsMFAEnabled], [m].[PreferredMFAType], [m].[UserID]
FROM [MFASetting] AS [m]
WHERE [m].[UserID] = @__userId_0
2025-06-09 09:36:43.379 +05:30 [INF] Executed DbCommand (299ms) [Parameters=[@p16='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 255), @p11='?' (Size = 50), @p12='?' (DbType = Boolean), @p13='?' (Size = 100), @p14='?' (DbType = Int32), @p15='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginCount] = @p2, [FirstName] = @p3, [IsActive] = @p4, [IsEmailVerified] = @p5, [IsLocked] = @p6, [IsPhoneNumberVerified] = @p7, [LastLoginAt] = @p8, [LastName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [RememberMe] = @p12, [SalesPersonCode] = @p13, [UserRoleId] = @p14, [Username] = @p15
OUTPUT 1
WHERE [UserID] = @p16;
2025-06-09 09:36:43.390 +05:30 [INF] Updated the last login time for user: 10.
2025-06-09 09:36:44.195 +05:30 [WRN] API Response: {
  "ip": "::1",
  "bogon": true
}
2025-06-09 09:36:44.452 +05:30 [INF] Executed DbCommand (196ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (Size = 255), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoginTrack] ([Browser], [City], [Country], [DeviceType], [FailureReason], [IPAddress], [IsSuccessful], [LoginMethod], [LoginTime], [MFAMethod], [MFAUsed], [OperatingSystem], [SessionID], [UserID])
OUTPUT INSERTED.[LoginTrackID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-09 09:36:44.663 +05:30 [INF] Executed DbCommand (200ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 09:36:44.673 +05:30 [INF] JWT token generated and stored for user 10.
2025-06-09 09:36:54.956 +05:30 [INF] Executed DbCommand (214ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 09:36:54.959 +05:30 [INF] Login successful without MFA for user: 10.
2025-06-09 09:36:54.962 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 09:36:54.964 +05:30 [INF] Executed action SriKanth.API.Controllers.UserController.Login (SriKanth.API) in 12411.3524ms
2025-06-09 09:36:54.967 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 09:36:54.970 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/User/login - 200 null application/json; charset=utf-8 12467.9107ms
2025-06-09 09:37:11.505 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/User/login - application/json 94
2025-06-09 09:37:11.512 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 09:37:11.515 +05:30 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(SriKanth.Model.Login_Module.DTOs.RequestLogin) on controller SriKanth.API.Controllers.UserController (SriKanth.API).
2025-06-09 09:37:11.531 +05:30 [INF] Login attempt started for the user with username or email: DinukaChathuranga.
2025-06-09 09:37:11.951 +05:30 [INF] Executed DbCommand (366ms) [Parameters=[@__usernameOrEmail_0='?' (Size = 100), @__usernameOrEmail_0_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__usernameOrEmail_0 OR [u].[Email] = @__usernameOrEmail_0_1
2025-06-09 09:37:12.256 +05:30 [INF] Executed DbCommand (291ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[MFASettingID], [m].[IsMFAEnabled], [m].[PreferredMFAType], [m].[UserID]
FROM [MFASetting] AS [m]
WHERE [m].[UserID] = @__userId_0
2025-06-09 09:37:12.564 +05:30 [INF] Executed DbCommand (299ms) [Parameters=[@p16='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 255), @p11='?' (Size = 50), @p12='?' (DbType = Boolean), @p13='?' (Size = 100), @p14='?' (DbType = Int32), @p15='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginCount] = @p2, [FirstName] = @p3, [IsActive] = @p4, [IsEmailVerified] = @p5, [IsLocked] = @p6, [IsPhoneNumberVerified] = @p7, [LastLoginAt] = @p8, [LastName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [RememberMe] = @p12, [SalesPersonCode] = @p13, [UserRoleId] = @p14, [Username] = @p15
OUTPUT 1
WHERE [UserID] = @p16;
2025-06-09 09:37:12.575 +05:30 [INF] Updated the last login time for user: 10.
2025-06-09 09:37:13.383 +05:30 [WRN] API Response: {
  "ip": "::1",
  "bogon": true
}
2025-06-09 09:37:13.709 +05:30 [INF] Executed DbCommand (298ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (Size = 255), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoginTrack] ([Browser], [City], [Country], [DeviceType], [FailureReason], [IPAddress], [IsSuccessful], [LoginMethod], [LoginTime], [MFAMethod], [MFAUsed], [OperatingSystem], [SessionID], [UserID])
OUTPUT INSERTED.[LoginTrackID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-09 09:37:45.230 +05:30 [INF] Executed DbCommand (363ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 09:37:45.237 +05:30 [INF] JWT token generated and stored for user 10.
2025-06-09 09:37:46.253 +05:30 [INF] Executed DbCommand (381ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 09:37:46.261 +05:30 [INF] Login successful without MFA for user: 10.
2025-06-09 09:37:46.264 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 09:37:46.268 +05:30 [INF] Executed action SriKanth.API.Controllers.UserController.Login (SriKanth.API) in 34745.4477ms
2025-06-09 09:37:46.272 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 09:37:46.273 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/User/login - 200 null application/json; charset=utf-8 34768.8305ms
2025-06-09 09:39:24.972 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 09:39:25.256 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 09:39:25.261 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 09:39:25.353 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 09:39:25.359 +05:30 [INF] Hosting environment: Development
2025-06-09 09:39:25.360 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 09:39:26.233 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 09:39:26.515 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 293.1316ms
2025-06-09 09:39:26.523 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 09:39:26.541 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 16.9924ms
2025-06-09 09:39:26.624 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 09:39:26.691 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 67.7465ms
2025-06-09 09:39:27.418 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 09:39:27.458 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.4332ms
2025-06-09 09:39:36.176 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 09:39:36.457 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 09:39:36.459 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 09:39:36.754 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 09:39:36.757 +05:30 [INF] Hosting environment: Development
2025-06-09 09:39:36.761 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 09:39:36.931 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 09:39:37.151 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 226.6962ms
2025-06-09 09:39:37.336 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 09:39:37.336 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 09:39:37.364 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 28.8282ms
2025-06-09 09:39:37.395 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.9733ms
2025-06-09 09:39:37.923 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 09:39:37.949 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 26.2412ms
2025-06-09 09:42:38.163 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Business/ChangeStatus - application/json 59
2025-06-09 09:42:38.252 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API)'
2025-06-09 09:42:38.497 +05:30 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(SriKanth.Model.BusinessModule.DTOs.UpdateOrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 09:42:41.462 +05:30 [INF] Beginning status update for order 7 to status "Processing"
2025-06-09 09:42:43.526 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:42:43.528 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:42:43.529 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:42:43.531 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 09:42:45.634 +05:30 [INF] Executed DbCommand (269ms) [Parameters=[@__orderNumber_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderNumber], [o].[CustomerCode], [o].[LocationCode], [o].[Note], [o].[OrderDate], [o].[PaymentMethodCode], [o].[RejectReason], [o].[SalesPersonCode], [o].[Status], [o].[TotalAmount]
FROM [Order] AS [o]
WHERE [o].[OrderNumber] = @__orderNumber_0
2025-06-09 09:42:45.987 +05:30 [INF] Executed DbCommand (226ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 1000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 1000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Order] SET [CustomerCode] = @p0, [LocationCode] = @p1, [Note] = @p2, [OrderDate] = @p3, [PaymentMethodCode] = @p4, [RejectReason] = @p5, [SalesPersonCode] = @p6, [Status] = @p7, [TotalAmount] = @p8
OUTPUT 1
WHERE [OrderNumber] = @p9;
2025-06-09 09:42:46.010 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:42:46.016 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:42:46.024 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:42:46.024 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:42:46.653 +05:30 [INF] Received HTTP response headers after 626.1722ms - 200
2025-06-09 09:42:46.657 +05:30 [INF] End processing HTTP request after 633.6848ms - 200
2025-06-09 09:42:46.665 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 09:42:46.665 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 09:42:46.704 +05:30 [INF] Received HTTP response headers after 686.2698ms - 200
2025-06-09 09:42:46.706 +05:30 [INF] End processing HTTP request after 697.6395ms - 200
2025-06-09 09:42:46.708 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 09:42:46.709 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 09:42:48.180 +05:30 [INF] Received HTTP response headers after 1514.0423ms - 200
2025-06-09 09:42:48.185 +05:30 [INF] End processing HTTP request after 1520.4003ms - 200
2025-06-09 09:42:48.933 +05:30 [INF] Received HTTP response headers after 2223.2487ms - 200
2025-06-09 09:42:48.939 +05:30 [INF] End processing HTTP request after 2230.5358ms - 200
2025-06-09 09:42:50.343 +05:30 [INF] Executed DbCommand (225ms) [Parameters=[@__orderNumber_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderItemId], [o].[Description], [o].[DiscountPercent], [o].[ItemCode], [o].[OrderNumber], [o].[Quantity], [o].[UnitPrice]
FROM [OrderItem] AS [o]
WHERE [o].[OrderNumber] = @__orderNumber_0
2025-06-09 09:44:02.121 +05:30 [INF] Start processing HTTP request POST https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesIntegrations?$expand=salesIntegrationLines
2025-06-09 09:44:02.123 +05:30 [INF] Sending HTTP request POST https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesIntegrations?$expand=salesIntegrationLines
2025-06-09 09:44:03.593 +05:30 [INF] Received HTTP response headers after 1468.1116ms - 201
2025-06-09 09:44:03.600 +05:30 [INF] End processing HTTP request after 1479.1639ms - 201
2025-06-09 09:44:16.358 +05:30 [INF] Successfully posted order 7 to external API
2025-06-09 09:44:16.360 +05:30 [INF] Successfully updated status of order 7 to "Processing"
2025-06-09 09:44:16.370 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 09:44:16.382 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API) in 97877.4675ms
2025-06-09 09:44:16.383 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API)'
2025-06-09 09:44:16.394 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Business/ChangeStatus - 200 null application/json; charset=utf-8 98230.9841ms
2025-06-09 09:44:44.161 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Business/ChangeStatus - application/json 59
2025-06-09 09:44:44.172 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API)'
2025-06-09 09:44:44.176 +05:30 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(SriKanth.Model.BusinessModule.DTOs.UpdateOrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 09:44:46.604 +05:30 [INF] Beginning status update for order 7 to status "Processing"
2025-06-09 09:44:46.990 +05:30 [INF] Executed DbCommand (363ms) [Parameters=[@__orderNumber_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderNumber], [o].[CustomerCode], [o].[LocationCode], [o].[Note], [o].[OrderDate], [o].[PaymentMethodCode], [o].[RejectReason], [o].[SalesPersonCode], [o].[Status], [o].[TotalAmount]
FROM [Order] AS [o]
WHERE [o].[OrderNumber] = @__orderNumber_0
2025-06-09 09:44:47.221 +05:30 [INF] Executed DbCommand (218ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 1000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 1000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Order] SET [CustomerCode] = @p0, [LocationCode] = @p1, [Note] = @p2, [OrderDate] = @p3, [PaymentMethodCode] = @p4, [RejectReason] = @p5, [SalesPersonCode] = @p6, [Status] = @p7, [TotalAmount] = @p8
OUTPUT 1
WHERE [OrderNumber] = @p9;
2025-06-09 09:44:49.198 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:44:49.201 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:44:59.569 +05:30 [INF] Received HTTP response headers after 10366.6438ms - 200
2025-06-09 09:45:00.274 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:45:00.274 +05:30 [INF] End processing HTTP request after 11076.5233ms - 200
2025-06-09 09:45:00.276 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:45:00.278 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 09:45:00.282 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 09:45:00.554 +05:30 [INF] Received HTTP response headers after 274.4401ms - 200
2025-06-09 09:45:00.558 +05:30 [INF] End processing HTTP request after 283.49ms - 200
2025-06-09 09:45:03.418 +05:30 [INF] Received HTTP response headers after 3134.7631ms - 200
2025-06-09 09:45:03.430 +05:30 [INF] End processing HTTP request after 3151.8751ms - 200
2025-06-09 09:45:18.630 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 09:45:18.632 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 09:45:20.080 +05:30 [INF] Received HTTP response headers after 1446.2527ms - 200
2025-06-09 09:45:20.083 +05:30 [INF] End processing HTTP request after 1453.0845ms - 200
2025-06-09 09:45:24.747 +05:30 [INF] Executed DbCommand (233ms) [Parameters=[@__orderNumber_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderItemId], [o].[Description], [o].[DiscountPercent], [o].[ItemCode], [o].[OrderNumber], [o].[Quantity], [o].[UnitPrice]
FROM [OrderItem] AS [o]
WHERE [o].[OrderNumber] = @__orderNumber_0
2025-06-09 09:45:59.437 +05:30 [INF] Start processing HTTP request POST https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesIntegrations?$expand=salesIntegrationLines
2025-06-09 09:45:59.439 +05:30 [INF] Sending HTTP request POST https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesIntegrations?$expand=salesIntegrationLines
2025-06-09 09:45:59.908 +05:30 [INF] Received HTTP response headers after 466.4468ms - 400
2025-06-09 09:45:59.911 +05:30 [INF] End processing HTTP request after 474.2366ms - 400
2025-06-09 09:46:17.379 +05:30 [ERR] Failed to send order 7 to external API
System.Exception: API request failed. Status: BadRequest. Response: {"error":{"code":"Internal_EntityWithSameKeyExists","message":"The record in table Sales Int Header already exists. Identification fields and values: Order No.='7'  CorrelationId:  7be3ec97-ae9e-4d1d-b83c-e3b0f2e7d968."}}
   at SriKanth.Service.SalesModule.ExternalApiService.PostDataToApiAsync[T](String apiUrl, Object data) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 166
   at SriKanth.Service.SalesModule.ExternalApiService.PostSalesOrderAsync(SalesOrderRequest salesOrder) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 268
   at SriKanth.Service.SalesModule.BusinessApiService.UpdateOrderStatusAsync(UpdateOrderRequest updateOrderRequest) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 634
2025-06-09 09:46:17.428 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 09:46:17.430 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API) in 93251.6952ms
2025-06-09 09:46:17.432 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API)'
2025-06-09 09:46:17.433 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Business/ChangeStatus - 400 null application/json; charset=utf-8 93272.3516ms
2025-06-09 09:47:08.720 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Business/ChangeStatus - application/json 59
2025-06-09 09:47:08.752 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API)'
2025-06-09 09:47:08.762 +05:30 [INF] Route matched with {action = "UpdateOrderStatus", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateOrderStatus(SriKanth.Model.BusinessModule.DTOs.UpdateOrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 09:47:11.373 +05:30 [INF] Beginning status update for order 1 to status "Processing"
2025-06-09 09:47:11.682 +05:30 [INF] Executed DbCommand (220ms) [Parameters=[@__orderNumber_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [o].[OrderNumber], [o].[CustomerCode], [o].[LocationCode], [o].[Note], [o].[OrderDate], [o].[PaymentMethodCode], [o].[RejectReason], [o].[SalesPersonCode], [o].[Status], [o].[TotalAmount]
FROM [Order] AS [o]
WHERE [o].[OrderNumber] = @__orderNumber_0
2025-06-09 09:47:11.917 +05:30 [INF] Executed DbCommand (229ms) [Parameters=[@p9='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 1000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 1000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Order] SET [CustomerCode] = @p0, [LocationCode] = @p1, [Note] = @p2, [OrderDate] = @p3, [PaymentMethodCode] = @p4, [RejectReason] = @p5, [SalesPersonCode] = @p6, [Status] = @p7, [TotalAmount] = @p8
OUTPUT 1
WHERE [OrderNumber] = @p9;
2025-06-09 09:47:17.816 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:47:17.818 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:47:26.397 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:47:26.402 +05:30 [INF] Received HTTP response headers after 8583.5606ms - 200
2025-06-09 09:47:26.428 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 09:47:26.430 +05:30 [INF] End processing HTTP request after 8613.8508ms - 200
2025-06-09 09:47:26.435 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 09:47:26.436 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 09:47:26.798 +05:30 [INF] Received HTTP response headers after 366.4838ms - 200
2025-06-09 09:47:26.802 +05:30 [INF] End processing HTTP request after 404.5099ms - 200
2025-06-09 09:47:26.803 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 09:47:26.805 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 09:47:27.488 +05:30 [INF] Received HTTP response headers after 681.8042ms - 200
2025-06-09 09:47:27.489 +05:30 [INF] End processing HTTP request after 685.8321ms - 200
2025-06-09 09:47:27.869 +05:30 [INF] Received HTTP response headers after 1432.641ms - 200
2025-06-09 09:47:27.872 +05:30 [INF] End processing HTTP request after 1437.1492ms - 200
2025-06-09 09:47:29.147 +05:30 [INF] Executed DbCommand (215ms) [Parameters=[@__orderNumber_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[OrderItemId], [o].[Description], [o].[DiscountPercent], [o].[ItemCode], [o].[OrderNumber], [o].[Quantity], [o].[UnitPrice]
FROM [OrderItem] AS [o]
WHERE [o].[OrderNumber] = @__orderNumber_0
2025-06-09 09:48:02.433 +05:30 [INF] Start processing HTTP request POST https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesIntegrations?$expand=salesIntegrationLines
2025-06-09 09:48:02.434 +05:30 [INF] Sending HTTP request POST https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesIntegrations?$expand=salesIntegrationLines
2025-06-09 09:48:02.811 +05:30 [INF] Received HTTP response headers after 376.363ms - 201
2025-06-09 09:48:02.815 +05:30 [INF] End processing HTTP request after 382.4087ms - 201
2025-06-09 09:49:45.207 +05:30 [INF] Successfully posted order 1 to external API
2025-06-09 09:49:45.217 +05:30 [INF] Successfully updated status of order 1 to "Processing"
2025-06-09 09:49:45.226 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 09:49:45.231 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API) in 156466.5496ms
2025-06-09 09:49:45.233 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.UpdateOrderStatus (SriKanth.API)'
2025-06-09 09:49:45.234 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Business/ChangeStatus - 200 null application/json; charset=utf-8 156514.4546ms
2025-06-09 11:34:24.781 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 11:34:25.055 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 11:34:25.058 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 11:34:25.156 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 11:34:25.159 +05:30 [INF] Hosting environment: Development
2025-06-09 11:34:25.162 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 11:34:25.874 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 11:34:26.241 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 379.3784ms
2025-06-09 11:34:26.279 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 11:34:26.292 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 13.0109ms
2025-06-09 11:34:26.361 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 11:34:26.460 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 99.9479ms
2025-06-09 11:34:27.076 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 11:34:27.133 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.8194ms
2025-06-09 11:35:11.745 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/api/User/GetUserDetailsById?userId=5 - null null
2025-06-09 11:35:11.826 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 11:35:11.833 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 11:35:11.835 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/api/User/GetUserDetailsById?userId=5 - 401 0 null 90.7756ms
2025-06-09 11:35:37.277 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 11:35:37.683 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 11:35:37.685 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 11:35:37.903 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 11:35:37.905 +05:30 [INF] Hosting environment: Development
2025-06-09 11:35:37.906 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 11:35:38.963 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 11:35:39.281 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 331.0374ms
2025-06-09 11:35:39.473 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 11:35:39.473 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 11:35:39.486 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 12.4018ms
2025-06-09 11:35:39.540 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.9994ms
2025-06-09 11:35:40.333 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 11:35:40.369 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.7231ms
2025-06-09 15:08:17.142 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 15:08:17.617 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 15:08:17.619 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 15:08:17.855 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 15:08:17.857 +05:30 [INF] Hosting environment: Development
2025-06-09 15:08:17.857 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 15:08:18.656 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 15:08:19.001 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 371.5592ms
2025-06-09 15:08:19.333 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 15:08:19.333 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 15:08:19.349 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 18.881ms
2025-06-09 15:08:19.420 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.5388ms
2025-06-09 15:08:20.017 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 15:08:20.084 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.1972ms
2025-06-09 15:10:25.211 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/User/login - application/json 94
2025-06-09 15:10:25.341 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 15:10:25.390 +05:30 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(SriKanth.Model.Login_Module.DTOs.RequestLogin) on controller SriKanth.API.Controllers.UserController (SriKanth.API).
2025-06-09 15:10:25.645 +05:30 [INF] Login attempt started for the user with username or email: DinukaChathuranga.
2025-06-09 15:10:28.228 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:10:28.231 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:10:28.234 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:10:28.236 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:10:30.450 +05:30 [INF] Executed DbCommand (261ms) [Parameters=[@__usernameOrEmail_0='?' (Size = 100), @__usernameOrEmail_0_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__usernameOrEmail_0 OR [u].[Email] = @__usernameOrEmail_0_1
2025-06-09 15:10:30.843 +05:30 [INF] Executed DbCommand (231ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[MFASettingID], [m].[IsMFAEnabled], [m].[PreferredMFAType], [m].[UserID]
FROM [MFASetting] AS [m]
WHERE [m].[UserID] = @__userId_0
2025-06-09 15:10:31.171 +05:30 [INF] Executed DbCommand (213ms) [Parameters=[@p16='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 255), @p11='?' (Size = 50), @p12='?' (DbType = Boolean), @p13='?' (Size = 100), @p14='?' (DbType = Int32), @p15='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginCount] = @p2, [FirstName] = @p3, [IsActive] = @p4, [IsEmailVerified] = @p5, [IsLocked] = @p6, [IsPhoneNumberVerified] = @p7, [LastLoginAt] = @p8, [LastName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [RememberMe] = @p12, [SalesPersonCode] = @p13, [UserRoleId] = @p14, [Username] = @p15
OUTPUT 1
WHERE [UserID] = @p16;
2025-06-09 15:10:31.185 +05:30 [INF] Updated the last login time for user: 10.
2025-06-09 15:10:31.871 +05:30 [WRN] API Response: {
  "ip": "::1",
  "bogon": true
}
2025-06-09 15:10:32.222 +05:30 [INF] Executed DbCommand (227ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (Size = 255), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoginTrack] ([Browser], [City], [Country], [DeviceType], [FailureReason], [IPAddress], [IsSuccessful], [LoginMethod], [LoginTime], [MFAMethod], [MFAUsed], [OperatingSystem], [SessionID], [UserID])
OUTPUT INSERTED.[LoginTrackID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-09 15:10:35.666 +05:30 [INF] Executed DbCommand (220ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 15:10:35.671 +05:30 [INF] JWT token generated and stored for user 10.
2025-06-09 15:10:36.912 +05:30 [INF] Executed DbCommand (223ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 15:10:36.916 +05:30 [INF] Login successful without MFA for user: 10.
2025-06-09 15:10:36.924 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 15:10:36.941 +05:30 [INF] Executed action SriKanth.API.Controllers.UserController.Login (SriKanth.API) in 11541.4445ms
2025-06-09 15:10:36.942 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 15:10:36.953 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/User/login - 200 null application/json; charset=utf-8 11742.2224ms
2025-06-09 15:11:11.371 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:11:11.404 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:11:11.438 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:11:11.447 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:11:11.455 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:11:11.460 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 89.1513ms
2025-06-09 15:11:23.949 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:11:23.957 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:11:23.962 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:11:23.964 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:11:23.966 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:11:23.967 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 18.4726ms
2025-06-09 15:12:32.713 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:12:32.716 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:12:32.718 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:12:32.720 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:12:32.721 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:12:32.722 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 8.7598ms
2025-06-09 15:13:08.034 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:13:08.039 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:13:08.041 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:13:08.042 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:13:08.043 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:13:08.044 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 10.4627ms
2025-06-09 15:13:23.237 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:13:23.242 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:13:23.244 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:13:23.245 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:13:23.246 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:13:23.248 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 11.5685ms
2025-06-09 15:13:54.033 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 15:13:54.323 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 15:13:54.325 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 15:13:54.419 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 15:13:54.420 +05:30 [INF] Hosting environment: Development
2025-06-09 15:13:54.422 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 15:13:56.109 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 15:13:56.483 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 389.4211ms
2025-06-09 15:13:56.744 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 15:13:56.744 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 15:13:56.760 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 16.3364ms
2025-06-09 15:13:56.824 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.9658ms
2025-06-09 15:13:57.713 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 15:13:57.833 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 120.0813ms
2025-06-09 15:17:43.822 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 15:17:44.065 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 15:17:44.068 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 15:17:44.158 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 15:17:44.160 +05:30 [INF] Hosting environment: Development
2025-06-09 15:17:44.161 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 15:17:44.638 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 15:17:44.901 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 278.6713ms
2025-06-09 15:17:44.954 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 15:17:44.970 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 16.9364ms
2025-06-09 15:17:45.048 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 15:17:45.120 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.8591ms
2025-06-09 15:17:45.771 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 15:17:45.803 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.7986ms
2025-06-09 15:18:02.027 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 15:18:02.250 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 15:18:02.254 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 15:18:02.368 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 15:18:02.369 +05:30 [INF] Hosting environment: Development
2025-06-09 15:18:02.371 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 15:18:03.444 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 15:18:03.753 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 319.7649ms
2025-06-09 15:18:04.007 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 15:18:04.007 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 15:18:04.033 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 20.5678ms
2025-06-09 15:18:04.078 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 72.1088ms
2025-06-09 15:18:04.933 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 15:18:05.003 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.1896ms
2025-06-09 15:18:09.336 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:18:09.478 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:18:09.509 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:18:09.518 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:18:09.525 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:18:09.536 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 200.0507ms
2025-06-09 15:18:12.318 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:18:12.328 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:18:12.330 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:18:12.332 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:18:12.332 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:18:12.333 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 15.679ms
2025-06-09 15:18:23.951 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:18:23.956 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:18:23.959 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:18:23.962 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:18:23.964 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:18:23.964 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 13.4298ms
2025-06-09 15:18:29.152 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:18:29.156 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:18:29.158 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:18:29.159 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:18:29.161 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:18:29.161 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 9.3944ms
2025-06-09 15:18:40.509 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:18:40.513 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-06-09 15:18:40.515 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-06-09 15:18:40.517 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 15:18:40.517 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 15:18:40.518 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 401 0 null 8.8085ms
2025-06-09 15:20:38.381 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 15:20:38.614 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 15:20:38.616 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 15:20:38.730 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 15:20:38.732 +05:30 [INF] Hosting environment: Development
2025-06-09 15:20:38.733 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 15:20:39.801 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 15:20:40.122 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 330.9791ms
2025-06-09 15:20:40.366 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 15:20:40.366 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 15:20:40.381 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 16.0275ms
2025-06-09 15:20:40.461 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.23ms
2025-06-09 15:20:41.328 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 15:20:41.385 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.8066ms
2025-06-09 15:20:45.796 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 15:20:45.950 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 15:20:46.172 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 15:20:48.488 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 15:20:49.935 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:20:49.938 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:20:49.940 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:20:49.941 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 15:20:52.042 +05:30 [INF] Executed DbCommand (288ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 15:20:52.382 +05:30 [INF] Executed DbCommand (217ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 15:20:53.349 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:20:53.355 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:20:56.292 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:20:56.293 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:20:57.495 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:20:57.497 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:20:58.902 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:20:58.905 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:21:00.054 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:21:00.055 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 15:21:00.229 +05:30 [INF] Received HTTP response headers after 6869.6803ms - 200
2025-06-09 15:21:00.233 +05:30 [INF] End processing HTTP request after 6885.7988ms - 200
2025-06-09 15:21:00.246 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 15:21:00.247 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 15:21:00.302 +05:30 [INF] Received HTTP response headers after 2803.3294ms - 200
2025-06-09 15:21:00.304 +05:30 [INF] End processing HTTP request after 2809.041ms - 200
2025-06-09 15:21:00.306 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 15:21:00.309 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 15:21:00.361 +05:30 [INF] Received HTTP response headers after 4065.5874ms - 200
2025-06-09 15:21:00.363 +05:30 [INF] End processing HTTP request after 4071.1378ms - 200
2025-06-09 15:21:00.365 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 15:21:00.367 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 15:21:00.494 +05:30 [INF] Received HTTP response headers after 1586.0436ms - 200
2025-06-09 15:21:00.496 +05:30 [INF] End processing HTTP request after 1593.9013ms - 200
2025-06-09 15:21:00.497 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 15:21:00.499 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 15:21:00.699 +05:30 [INF] Received HTTP response headers after 642.9823ms - 200
2025-06-09 15:21:00.702 +05:30 [INF] End processing HTTP request after 647.6404ms - 200
2025-06-09 15:21:00.704 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 15:21:00.706 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 15:21:01.752 +05:30 [INF] Received HTTP response headers after 1252.131ms - 200
2025-06-09 15:21:01.757 +05:30 [INF] End processing HTTP request after 1259.9683ms - 200
2025-06-09 15:21:01.782 +05:30 [INF] Received HTTP response headers after 1533.4513ms - 200
2025-06-09 15:21:01.784 +05:30 [INF] End processing HTTP request after 1538.5343ms - 200
2025-06-09 15:21:02.512 +05:30 [INF] Received HTTP response headers after 1803.5131ms - 200
2025-06-09 15:21:02.514 +05:30 [INF] End processing HTTP request after 1809.3864ms - 200
2025-06-09 15:21:02.766 +05:30 [INF] Received HTTP response headers after 2455.2323ms - 200
2025-06-09 15:21:02.848 +05:30 [INF] Received HTTP response headers after 2479.8385ms - 200
2025-06-09 15:21:02.948 +05:30 [INF] End processing HTTP request after 2582.5961ms - 200
2025-06-09 15:21:02.897 +05:30 [INF] End processing HTTP request after 2590.2111ms - 200
2025-06-09 15:21:03.931 +05:30 [INF] Retrieved filtered order details for user 5 with 1 locations, 262 customers, and 5 items
2025-06-09 15:21:06.013 +05:30 [INF] Executed DbCommand (238ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 15:21:06.061 +05:30 [INF] Executing OkObjectResult, writing value of type 'SriKanth.Model.BusinessModule.DTOs.OrderCreationDetails'.
2025-06-09 15:21:06.088 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 19907.048ms
2025-06-09 15:21:06.091 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 15:21:06.104 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 200 null application/json; charset=utf-8 20308.2106ms
2025-06-09 17:07:41.271 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 17:07:41.642 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 17:07:41.644 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 17:07:41.722 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 17:07:41.724 +05:30 [INF] Hosting environment: Development
2025-06-09 17:07:41.724 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 17:07:42.787 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 17:07:43.097 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 321.1219ms
2025-06-09 17:07:43.160 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 17:07:43.175 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 16.2648ms
2025-06-09 17:07:43.224 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 17:07:43.336 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 112.1438ms
2025-06-09 17:07:44.059 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 17:07:44.094 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 35.1799ms
2025-06-09 17:14:31.951 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/User/login - application/json 94
2025-06-09 17:14:32.025 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 17:14:32.048 +05:30 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(SriKanth.Model.Login_Module.DTOs.RequestLogin) on controller SriKanth.API.Controllers.UserController (SriKanth.API).
2025-06-09 17:14:32.246 +05:30 [INF] Login attempt started for the user with username or email: DinukaChathuranga.
2025-06-09 17:14:40.010 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:14:40.014 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:14:40.015 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:14:40.016 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:14:48.232 +05:30 [INF] Executed DbCommand (386ms) [Parameters=[@__usernameOrEmail_0='?' (Size = 100), @__usernameOrEmail_0_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__usernameOrEmail_0 OR [u].[Email] = @__usernameOrEmail_0_1
2025-06-09 17:14:51.578 +05:30 [INF] Executed DbCommand (3,252ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[MFASettingID], [m].[IsMFAEnabled], [m].[PreferredMFAType], [m].[UserID]
FROM [MFASetting] AS [m]
WHERE [m].[UserID] = @__userId_0
2025-06-09 17:15:10.010 +05:30 [INF] Executed DbCommand (18,348ms) [Parameters=[@p16='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 255), @p11='?' (Size = 50), @p12='?' (DbType = Boolean), @p13='?' (Size = 100), @p14='?' (DbType = Int32), @p15='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginCount] = @p2, [FirstName] = @p3, [IsActive] = @p4, [IsEmailVerified] = @p5, [IsLocked] = @p6, [IsPhoneNumberVerified] = @p7, [LastLoginAt] = @p8, [LastName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [RememberMe] = @p12, [SalesPersonCode] = @p13, [UserRoleId] = @p14, [Username] = @p15
OUTPUT 1
WHERE [UserID] = @p16;
2025-06-09 17:15:10.028 +05:30 [INF] Updated the last login time for user: 10.
2025-06-09 17:15:15.779 +05:30 [WRN] API Response: {
  "ip": "::1",
  "bogon": true
}
2025-06-09 17:15:50.915 +05:30 [ERR] Failed executing DbCommand (35,034ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (Size = 255), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoginTrack] ([Browser], [City], [Country], [DeviceType], [FailureReason], [IPAddress], [IsSuccessful], [LoginMethod], [LoginTime], [MFAMethod], [MFAUsed], [OperatingSystem], [SessionID], [UserID])
OUTPUT INSERTED.[LoginTrackID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-09 17:15:50.946 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'SriKanth.Model.SriKanthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3a8acac6-14ee-4af7-85a1-effdcca67fd2
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:3a8acac6-14ee-4af7-85a1-effdcca67fd2
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-09 17:15:51.021 +05:30 [ERR] Error tracking login for user 10: An error occurred while saving the entity changes. See the inner exception for details.
2025-06-09 17:15:56.331 +05:30 [INF] Executed DbCommand (829ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (Size = 255), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Boolean), @p17='?' (DbType = Boolean), @p18='?' (DbType = DateTime2), @p19='?' (Size = 255), @p20='?' (Size = 1000), @p21='?' (Size = 50), @p22='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [LoginTrack] ([Browser], [City], [Country], [DeviceType], [FailureReason], [IPAddress], [IsSuccessful], [LoginMethod], [LoginTime], [MFAMethod], [MFAUsed], [OperatingSystem], [SessionID], [UserID])
OUTPUT INSERTED.[LoginTrackID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22);
2025-06-09 17:15:56.666 +05:30 [INF] JWT token generated and stored for user 10.
2025-06-09 17:15:58.000 +05:30 [INF] Executed DbCommand (304ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 17:15:58.004 +05:30 [INF] Login successful without MFA for user: 10.
2025-06-09 17:15:58.011 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 17:15:58.025 +05:30 [INF] Executed action SriKanth.API.Controllers.UserController.Login (SriKanth.API) in 85968.0496ms
2025-06-09 17:15:58.029 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 17:15:58.036 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/User/login - 200 null application/json; charset=utf-8 86084.6373ms
2025-06-09 17:16:14.482 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder - application/json 322
2025-06-09 17:16:14.538 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:16:14.548 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:16:14.628 +05:30 [INF] Beginning order submission for user 0, customer 100, location RGM-SKM01
2025-06-09 17:16:14.992 +05:30 [INF] Executed DbCommand (321ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:16:14.995 +05:30 [WRN] User with ID 0 not found during order submission
2025-06-09 17:16:18.480 +05:30 [INF] Executed DbCommand (319ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 17:16:18.485 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 17:16:18.489 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API) in 3939.7392ms
2025-06-09 17:16:18.490 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:16:18.491 +05:30 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder - 400 null application/json; charset=utf-8 4011.5161ms
2025-06-09 17:16:48.255 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - application/json 322
2025-06-09 17:16:48.268 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:16:48.272 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:16:48.282 +05:30 [INF] Beginning order submission for user 5, customer 100, location RGM-SKM01
2025-06-09 17:16:48.637 +05:30 [INF] Executed DbCommand (302ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:17:04.635 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:17:04.640 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:18:44.748 +05:30 [ERR] Error during credit validation for customer 100
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetAccessTokenAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 74
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 104
   at SriKanth.Service.SalesModule.ExternalApiService.GetCustomerDetailsAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 255
   at SriKanth.Service.SalesModule.BusinessApiService.ValidateCustomerCredit(String customerCode, Decimal orderTotal) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 735
2025-06-09 17:18:44.775 +05:30 [WRN] Credit validation failed for customer 100
2025-06-09 17:18:47.638 +05:30 [INF] Executed DbCommand (329ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 17:18:47.641 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 17:18:47.642 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API) in 119367.0587ms
2025-06-09 17:18:47.643 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:18:47.644 +05:30 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - 400 null application/json; charset=utf-8 119389.1171ms
2025-06-09 17:20:09.164 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - application/json 322
2025-06-09 17:20:09.168 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:20:09.172 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:20:09.177 +05:30 [INF] Beginning order submission for user 5, customer 100, location RGM-SKM01
2025-06-09 17:20:09.928 +05:30 [INF] Executed DbCommand (748ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:20:14.985 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:20:14.988 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:20:50.064 +05:30 [INF] Received HTTP response headers after 35070.8733ms - 200
2025-06-09 17:20:50.068 +05:30 [INF] End processing HTTP request after 35082.1642ms - 200
2025-06-09 17:20:50.079 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:20:50.081 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:21:10.904 +05:30 [INF] Received HTTP response headers after 20820.4954ms - 200
2025-06-09 17:21:10.907 +05:30 [INF] End processing HTTP request after 20828.2676ms - 200
2025-06-09 17:21:44.845 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - application/json 322
2025-06-09 17:21:44.849 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:21:44.850 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:21:44.853 +05:30 [INF] Beginning order submission for user 5, customer 100, location RGM-SKM01
2025-06-09 17:21:45.156 +05:30 [INF] Executed DbCommand (302ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:21:50.725 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:21:50.726 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:21:57.140 +05:30 [INF] Received HTTP response headers after 6412.8175ms - 200
2025-06-09 17:21:57.142 +05:30 [INF] End processing HTTP request after 6417.7951ms - 200
2025-06-09 17:21:57.146 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:21:57.147 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:22:02.277 +05:30 [INF] Received HTTP response headers after 5129.1075ms - 200
2025-06-09 17:22:02.279 +05:30 [INF] End processing HTTP request after 5133.2942ms - 200
2025-06-09 17:22:17.715 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 17:22:18.005 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 17:22:18.007 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 17:22:18.262 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 17:22:18.264 +05:30 [INF] Hosting environment: Development
2025-06-09 17:22:18.266 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 17:22:19.590 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 17:22:19.919 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 342.7044ms
2025-06-09 17:22:19.947 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 17:22:19.971 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 23.9052ms
2025-06-09 17:22:20.071 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 17:22:20.144 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 73.2681ms
2025-06-09 17:22:21.116 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 17:22:21.167 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.3759ms
2025-06-09 17:22:27.698 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - application/json 322
2025-06-09 17:22:27.839 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:22:27.996 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:22:28.125 +05:30 [INF] Beginning order submission for user 5, customer 100, location RGM-SKM01
2025-06-09 17:22:32.813 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:22:32.820 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:22:32.823 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:22:32.825 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:22:37.643 +05:30 [INF] Executed DbCommand (369ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:23:26.437 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:23:26.443 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:23:39.785 +05:30 [INF] Received HTTP response headers after 13338.9094ms - 200
2025-06-09 17:23:39.788 +05:30 [INF] End processing HTTP request after 13353.5609ms - 200
2025-06-09 17:23:58.963 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:23:58.965 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:24:19.309 +05:30 [INF] Received HTTP response headers after 20342.8266ms - 200
2025-06-09 17:24:19.312 +05:30 [INF] End processing HTTP request after 20349.493ms - 200
2025-06-09 17:32:10.197 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 17:32:10.549 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 17:32:10.551 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 17:32:10.686 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 17:32:10.691 +05:30 [INF] Hosting environment: Development
2025-06-09 17:32:10.693 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 17:32:11.935 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 17:32:12.232 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 311.4768ms
2025-06-09 17:32:12.469 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 17:32:12.469 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 17:32:12.489 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 20.7469ms
2025-06-09 17:32:12.549 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.5985ms
2025-06-09 17:32:13.403 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 17:32:13.476 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.053ms
2025-06-09 17:32:18.368 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - application/json 322
2025-06-09 17:32:18.599 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:32:18.919 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:32:19.129 +05:30 [INF] Beginning order submission for user 5, customer 100, location RGM-SKM01
2025-06-09 17:32:21.834 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:32:21.838 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:32:21.841 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:32:21.842 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:32:30.532 +05:30 [INF] Executed DbCommand (1,918ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:32:37.203 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:32:37.209 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:32:38.743 +05:30 [INF] Received HTTP response headers after 1530.1039ms - 200
2025-06-09 17:32:38.747 +05:30 [INF] End processing HTTP request after 1545.7399ms - 200
2025-06-09 17:32:38.754 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:32:38.755 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:44:02.518 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 17:44:02.829 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 17:44:02.831 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 17:44:02.943 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 17:44:02.945 +05:30 [INF] Hosting environment: Development
2025-06-09 17:44:02.946 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 17:44:03.431 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 17:44:03.752 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 335.2487ms
2025-06-09 17:44:03.794 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 17:44:03.815 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 21.0004ms
2025-06-09 17:44:03.979 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 17:44:04.059 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 80.8886ms
2025-06-09 17:44:05.193 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 17:44:05.224 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.0295ms
2025-06-09 17:44:21.283 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - application/json 322
2025-06-09 17:44:21.637 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:44:22.067 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:44:22.385 +05:30 [INF] Beginning order submission for user 5, customer 100, location RGM-SKM01
2025-06-09 17:44:26.052 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:44:26.056 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:44:26.059 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:44:26.062 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 17:44:34.893 +05:30 [INF] Executed DbCommand (1,105ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:44:51.835 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:44:51.843 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:45:06.093 +05:30 [INF] Received HTTP response headers after 14238.1022ms - 200
2025-06-09 17:45:06.102 +05:30 [INF] End processing HTTP request after 14269.2853ms - 200
2025-06-09 17:45:10.049 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:45:10.055 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:45:37.983 +05:30 [INF] Received HTTP response headers after 27922.3678ms - 200
2025-06-09 17:45:37.986 +05:30 [INF] End processing HTTP request after 27937.2364ms - 200
2025-06-09 17:46:50.268 +05:30 [ERR] Error during credit validation for customer 100
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.FillAsync(Boolean async)
   at System.Net.Http.HttpConnection.ChunkedEncodingReadStream.CopyToAsyncCore(Stream destination, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.ChunkedEncodingReadStream.CopyToAsyncCore(Stream destination, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionResponseContent.<SerializeToStreamAsync>g__Impl|6_0(Stream stream, CancellationToken cancellationToken)
   at System.Net.Http.HttpContent.LoadIntoBufferAsyncCore(Task serializeToStreamTask, MemoryStream tempBuffer)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 111
   at SriKanth.Service.SalesModule.ExternalApiService.GetCustomersAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 182
   at SriKanth.Service.SalesModule.BusinessApiService.ValidateCustomerCredit(String customerCode, Decimal orderTotal) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 735
2025-06-09 17:46:50.318 +05:30 [WRN] Credit validation failed for customer 100
2025-06-09 17:46:55.194 +05:30 [INF] Executed DbCommand (365ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 17:46:55.261 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 17:46:55.289 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API) in 153206.7718ms
2025-06-09 17:46:55.295 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:46:55.315 +05:30 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - 400 null application/json; charset=utf-8 154032.4667ms
2025-06-09 17:47:01.718 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - application/json 322
2025-06-09 17:47:01.741 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:47:01.747 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:47:01.757 +05:30 [INF] Beginning order submission for user 5, customer 100, location RGM-SKM01
2025-06-09 17:47:02.799 +05:30 [INF] Executed DbCommand (990ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:47:32.496 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:47:32.498 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:47:36.024 +05:30 [INF] Received HTTP response headers after 3523.602ms - 200
2025-06-09 17:47:36.027 +05:30 [INF] End processing HTTP request after 3530.507ms - 200
2025-06-09 17:47:40.126 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:47:40.129 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:49:38.247 +05:30 [ERR] Error during credit validation for customer 100
System.Net.Http.HttpRequestException: An error occurred while sending the request.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 111
   at SriKanth.Service.SalesModule.ExternalApiService.GetCustomersAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 182
   at SriKanth.Service.SalesModule.BusinessApiService.ValidateCustomerCredit(String customerCode, Decimal orderTotal) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 735
2025-06-09 17:49:38.290 +05:30 [WRN] Credit validation failed for customer 100
2025-06-09 17:49:39.750 +05:30 [INF] Executed DbCommand (415ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 17:49:39.758 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 17:49:39.763 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API) in 158011.5606ms
2025-06-09 17:49:39.766 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 17:49:39.769 +05:30 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=5 - 400 null application/json; charset=utf-8 158051.441ms
2025-06-09 17:55:24.822 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 17:55:24.837 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 17:55:24.861 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:55:31.073 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 17:55:48.041 +05:30 [INF] Executed DbCommand (353ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:55:48.494 +05:30 [INF] Executed DbCommand (431ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 17:55:54.157 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:55:54.159 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:55:58.325 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:55:58.326 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:56:00.949 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:56:00.951 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:56:07.059 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:56:07.064 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:56:09.646 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:56:09.651 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:56:10.920 +05:30 [INF] Received HTTP response headers after 12591.2309ms - 200
2025-06-09 17:56:10.923 +05:30 [INF] End processing HTTP request after 12598.7346ms - 200
2025-06-09 17:56:16.958 +05:30 [INF] Received HTTP response headers after 22795.4288ms - 200
2025-06-09 17:56:16.958 +05:30 [INF] Received HTTP response headers after 16005.403ms - 200
2025-06-09 17:56:17.653 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:56:16.972 +05:30 [INF] End processing HTTP request after 22815.6664ms - 200
2025-06-09 17:56:17.657 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 17:56:17.655 +05:30 [INF] End processing HTTP request after 16706.5581ms - 200
2025-06-09 17:56:21.984 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 17:56:21.990 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 17:56:21.988 +05:30 [INF] Received HTTP response headers after 12334.504ms - 200
2025-06-09 17:56:22.022 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 17:56:22.023 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 17:56:22.025 +05:30 [INF] End processing HTTP request after 12378.9651ms - 200
2025-06-09 17:56:23.489 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 17:56:23.497 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 17:56:25.444 +05:30 [INF] Received HTTP response headers after 1943.7553ms - 200
2025-06-09 17:56:25.446 +05:30 [INF] End processing HTTP request after 1956.8361ms - 200
2025-06-09 17:56:28.588 +05:30 [INF] Received HTTP response headers after 6558.8068ms - 200
2025-06-09 17:56:28.591 +05:30 [INF] Received HTTP response headers after 6563.7307ms - 200
2025-06-09 17:56:29.212 +05:30 [INF] End processing HTTP request after 7223.5325ms - 200
2025-06-09 17:56:29.235 +05:30 [INF] End processing HTTP request after 7250.7492ms - 200
2025-06-09 17:56:47.573 +05:30 [INF] Received HTTP response headers after 29906.1808ms - 200
2025-06-09 17:56:47.577 +05:30 [INF] End processing HTTP request after 29924.214ms - 200
2025-06-09 17:57:57.832 +05:30 [ERR] Failed to retrieve filtered order details for user 5
System.Net.Http.HttpRequestException: An error occurred while sending the request.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetAccessTokenAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 74
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 104
   at SriKanth.Service.SalesModule.ExternalApiService.GetSalesPriceAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 244
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 289
2025-06-09 17:58:05.165 +05:30 [INF] Executed DbCommand (1,215ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 17:58:05.175 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-09 17:58:05.182 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 160314.635ms
2025-06-09 17:58:05.184 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 17:58:05.186 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 500 null text/plain; charset=utf-8 160364.2767ms
2025-06-09 17:59:33.271 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 17:59:33.280 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 17:59:33.282 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 17:59:35.273 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 17:59:35.618 +05:30 [INF] Executed DbCommand (341ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 17:59:35.931 +05:30 [INF] Executed DbCommand (304ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 17:59:46.856 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 17:59:46.859 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:00:01.801 +05:30 [INF] Received HTTP response headers after 14940.3243ms - 200
2025-06-09 18:00:15.631 +05:30 [INF] End processing HTTP request after 28772.8867ms - 200
2025-06-09 18:00:18.427 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:00:19.129 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:00:32.615 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:00:32.625 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:00:34.952 +05:30 [INF] Received HTTP response headers after 2326.2439ms - 200
2025-06-09 18:00:35.779 +05:30 [INF] End processing HTTP request after 3163.3794ms - 200
2025-06-09 18:00:49.684 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:01:18.177 +05:30 [INF] Received HTTP response headers after 58421.2841ms - 200
2025-06-09 18:01:18.177 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:01:18.180 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:01:18.190 +05:30 [INF] End processing HTTP request after 59776.0831ms - 200
2025-06-09 18:01:18.192 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:01:32.344 +05:30 [INF] Received HTTP response headers after 14151.3849ms - 200
2025-06-09 18:01:33.616 +05:30 [INF] End processing HTTP request after 43931.4205ms - 200
2025-06-09 18:01:59.071 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:01:59.077 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:02:01.357 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:02:01.360 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:02:04.714 +05:30 [INF] Received HTTP response headers after 5635.1694ms - 200
2025-06-09 18:02:04.719 +05:30 [INF] End processing HTTP request after 5647.8855ms - 200
2025-06-09 18:02:06.527 +05:30 [INF] Received HTTP response headers after 5163.576ms - 200
2025-06-09 18:02:06.530 +05:30 [INF] End processing HTTP request after 5172.1557ms - 200
2025-06-09 18:02:58.266 +05:30 [ERR] Failed to retrieve filtered order details for user 5
System.Net.Http.HttpRequestException: Error while copying content to a stream.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.FillAsync(Boolean async)
   at System.Net.Http.HttpConnection.ChunkedEncodingReadStream.CopyToAsyncCore(Stream destination, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionResponseContent.<SerializeToStreamAsync>g__Impl|6_0(Stream stream, CancellationToken cancellationToken)
   at System.Net.Http.HttpContent.LoadIntoBufferAsyncCore(Task serializeToStreamTask, MemoryStream tempBuffer)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpContent.LoadIntoBufferAsyncCore(Task serializeToStreamTask, MemoryStream tempBuffer)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 111
   at SriKanth.Service.SalesModule.ExternalApiService.GetCustomersAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 182
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 289
2025-06-09 18:03:25.212 +05:30 [INF] Executed DbCommand (332ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:03:25.224 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-09 18:03:25.232 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 231946.3485ms
2025-06-09 18:03:25.235 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:03:25.238 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 500 null text/plain; charset=utf-8 231966.9875ms
2025-06-09 18:04:00.317 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 18:04:00.332 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:04:00.335 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 18:04:47.225 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 18:04:50.253 +05:30 [INF] Executed DbCommand (3,014ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 18:04:50.603 +05:30 [INF] Executed DbCommand (339ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 18:05:46.164 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:05:46.167 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:05:59.794 +05:30 [INF] Received HTTP response headers after 13615.9523ms - 200
2025-06-09 18:05:59.814 +05:30 [INF] End processing HTTP request after 13650.0406ms - 200
2025-06-09 18:06:09.303 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:06:12.080 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:06:21.278 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:06:21.280 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:06:22.192 +05:30 [INF] Received HTTP response headers after 908.452ms - 200
2025-06-09 18:06:22.215 +05:30 [INF] End processing HTTP request after 937.389ms - 200
2025-06-09 18:06:28.556 +05:30 [INF] Received HTTP response headers after 16459.1143ms - 200
2025-06-09 18:06:41.552 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:06:49.357 +05:30 [INF] End processing HTTP request after 40054.1132ms - 200
2025-06-09 18:06:49.359 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:06:57.349 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:06:57.386 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:07:14.948 +05:30 [INF] Received HTTP response headers after 22493.4934ms - 200
2025-06-09 18:07:14.991 +05:30 [INF] End processing HTTP request after 33441.5113ms - 200
2025-06-09 18:07:23.113 +05:30 [INF] Received HTTP response headers after 8145.8375ms - 200
2025-06-09 18:07:25.936 +05:30 [INF] End processing HTTP request after 28586.3089ms - 200
2025-06-09 18:07:35.750 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:07:38.850 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:07:41.523 +05:30 [INF] Received HTTP response headers after 888.5809ms - 200
2025-06-09 18:07:41.603 +05:30 [INF] End processing HTTP request after 5852.0343ms - 200
2025-06-09 18:08:07.838 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:08:12.683 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:08:31.086 +05:30 [INF] Received HTTP response headers after 13408.7182ms - 200
2025-06-09 18:08:32.159 +05:30 [INF] End processing HTTP request after 24321.1418ms - 200
2025-06-09 18:09:29.692 +05:30 [ERR] Failed to retrieve filtered order details for user 5
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.FillAsync(Boolean async)
   at System.Net.Http.HttpConnection.ChunkedEncodingReadStream.CopyToAsyncCore(Stream destination, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.ChunkedEncodingReadStream.CopyToAsyncCore(Stream destination, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionResponseContent.<SerializeToStreamAsync>g__Impl|6_0(Stream stream, CancellationToken cancellationToken)
   at System.Net.Http.HttpContent.LoadIntoBufferAsyncCore(Task serializeToStreamTask, MemoryStream tempBuffer)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 111
   at SriKanth.Service.SalesModule.ExternalApiService.GetCustomersAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 182
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 289
2025-06-09 18:09:31.313 +05:30 [INF] Executed DbCommand (313ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:09:31.318 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-09 18:09:31.320 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 330980.0874ms
2025-06-09 18:09:31.321 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:09:31.323 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 500 null text/plain; charset=utf-8 331006.1524ms
2025-06-09 18:09:48.441 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 18:09:48.448 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:09:48.450 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 18:09:50.361 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 18:09:51.252 +05:30 [INF] Executed DbCommand (886ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 18:10:03.644 +05:30 [INF] Executed DbCommand (882ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 18:10:14.222 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:10:14.224 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:10:42.173 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:10:42.180 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:11:00.187 +05:30 [INF] Received HTTP response headers after 45960.4324ms - 200
2025-06-09 18:11:01.445 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:11:01.451 +05:30 [INF] End processing HTTP request after 47228.7926ms - 200
2025-06-09 18:11:01.454 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:12:16.433 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:12:16.448 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:12:18.543 +05:30 [INF] Received HTTP response headers after 7234.2803ms - 200
2025-06-09 18:12:21.281 +05:30 [INF] End processing HTTP request after 79835.4414ms - 200
2025-06-09 18:15:09.444 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:15:09.444 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:15:09.473 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:15:09.548 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:15:14.755 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:15:14.768 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:15:16.709 +05:30 [INF] Received HTTP response headers after 1939.2439ms - 200
2025-06-09 18:15:16.712 +05:30 [INF] End processing HTTP request after 1956.7284ms - 200
2025-06-09 18:15:24.019 +05:30 [INF] Received HTTP response headers after 14452.0633ms - 200
2025-06-09 18:15:24.023 +05:30 [INF] End processing HTTP request after 14580.5809ms - 200
2025-06-09 18:15:44.981 +05:30 [INF] Received HTTP response headers after 35411.2458ms - 200
2025-06-09 18:15:44.997 +05:30 [INF] End processing HTTP request after 35552.7053ms - 200
2025-06-09 18:15:51.421 +05:30 [ERR] Failed to retrieve filtered order details for user 5
System.Net.Http.HttpRequestException: An error occurred while sending the request.
 ---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host..
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.CreateException(SocketError error, Boolean forAsyncThrow)
   at System.Net.Sockets.NetworkStream.ReadAsync(Memory`1 buffer, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Net.Sockets.SocketAsyncEventArgs.<>c.<.cctor>b__173_0(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
   at System.Threading.ThreadPoolTypedWorkItemQueue`2.System.Threading.IThreadPoolWorkItem.Execute()
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
--- End of stack trace from previous location ---

   --- End of inner exception stack trace ---
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.InitialFillAsync(Boolean async)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsyncCore(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetAccessTokenAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 74
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 104
   at SriKanth.Service.SalesModule.ExternalApiService.GetCustomersAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 182
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 289
2025-06-09 18:16:48.673 +05:30 [ERR] Failed executing DbCommand (35,018ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:16:48.691 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'SriKanth.Model.SriKanthDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef984f5b-c5b1-4311-a9a7-365169c06eb4
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef984f5b-c5b1-4311-a9a7-365169c06eb4
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-09 18:16:48.784 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 420332.381ms
2025-06-09 18:16:48.789 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:16:48.794 +05:30 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ef984f5b-c5b1-4311-a9a7-365169c06eb4
Error Number:-2,State:0,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.OnActionExecutionAsync(ActionExecutingContext context, ActionExecutionDelegate next) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-06-09 18:16:48.843 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 500 null text/plain; charset=utf-8 420402.5071ms
2025-06-09 18:18:18.063 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 18:18:18.067 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:18:18.070 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 18:18:52.003 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 18:18:54.334 +05:30 [INF] Executed DbCommand (334ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 18:19:29.366 +05:30 [ERR] Failed executing DbCommand (35,020ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 18:19:29.376 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'SriKanth.Model.SriKanthDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dedec12b-ca7f-40d8-9d1b-dd42bc5eac73
Error Number:-2,State:0,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:dedec12b-ca7f-40d8-9d1b-dd42bc5eac73
Error Number:-2,State:0,Class:11
2025-06-09 18:19:29.438 +05:30 [ERR] Failed to retrieve filtered order details for user 5
Microsoft.Data.SqlClient.SqlException (0x80131904): Execution Timeout Expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.
 ---> System.ComponentModel.Win32Exception (258): The wait operation timed out.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.GetUserLocationCodesAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 184
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 275
ClientConnectionId:dedec12b-ca7f-40d8-9d1b-dd42bc5eac73
Error Number:-2,State:0,Class:11
2025-06-09 18:19:49.488 +05:30 [INF] Executed DbCommand (314ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:19:49.495 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-09 18:19:49.499 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 91426.9911ms
2025-06-09 18:19:49.502 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:19:49.503 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 500 null text/plain; charset=utf-8 91440.1729ms
2025-06-09 18:24:04.257 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 18:24:04.477 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 18:24:04.480 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 18:24:04.563 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 18:24:04.565 +05:30 [INF] Hosting environment: Development
2025-06-09 18:24:04.567 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 18:24:06.112 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 18:24:06.508 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 411.1767ms
2025-06-09 18:24:06.738 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 18:24:06.738 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 18:24:06.769 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 30.7557ms
2025-06-09 18:24:06.825 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 87.4795ms
2025-06-09 18:24:07.719 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 18:24:07.758 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 39.4804ms
2025-06-09 18:44:36.380 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-06-09 18:44:36.808 +05:30 [INF] Now listening on: https://localhost:7168
2025-06-09 18:44:36.812 +05:30 [INF] Now listening on: http://localhost:5076
2025-06-09 18:44:37.024 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-06-09 18:44:37.029 +05:30 [INF] Hosting environment: Development
2025-06-09 18:44:37.030 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-06-09 18:44:37.600 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-06-09 18:44:38.021 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 442.2109ms
2025-06-09 18:44:38.064 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-06-09 18:44:38.101 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 45.8268ms
2025-06-09 18:44:38.173 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-06-09 18:44:38.274 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 101.7964ms
2025-06-09 18:44:39.058 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-06-09 18:44:40.255 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1197.725ms
2025-06-09 18:45:03.913 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=10 - null null
2025-06-09 18:45:05.500 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-06-09 18:45:05.511 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-09 18:45:05.514 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=10 - 401 0 null 1600.8489ms
2025-06-09 18:46:32.307 +05:30 [INF] Request starting HTTP/2 POST https://localhost:7168/api/User/login - application/json 94
2025-06-09 18:46:32.337 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 18:46:32.361 +05:30 [INF] Route matched with {action = "Login", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(SriKanth.Model.Login_Module.DTOs.RequestLogin) on controller SriKanth.API.Controllers.UserController (SriKanth.API).
2025-06-09 18:46:33.205 +05:30 [INF] Login attempt started for the user with username or email: DinukaChathuranga.
2025-06-09 18:46:35.995 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 18:46:36.000 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 18:46:36.004 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 18:46:36.005 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-06-09 18:46:39.299 +05:30 [INF] Executed DbCommand (360ms) [Parameters=[@__usernameOrEmail_0='?' (Size = 100), @__usernameOrEmail_0_1='?' (Size = 255)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__usernameOrEmail_0 OR [u].[Email] = @__usernameOrEmail_0_1
2025-06-09 18:46:39.668 +05:30 [INF] Executed DbCommand (263ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[MFASettingID], [m].[IsMFAEnabled], [m].[PreferredMFAType], [m].[UserID]
FROM [MFASetting] AS [m]
WHERE [m].[UserID] = @__userId_0
2025-06-09 18:46:40.087 +05:30 [INF] Executed DbCommand (295ms) [Parameters=[@p16='?' (DbType = Int32), @p0='?' (DbType = DateTime2), @p1='?' (Size = 255), @p2='?' (DbType = Int32), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime2), @p9='?' (Size = 100), @p10='?' (Size = 255), @p11='?' (Size = 50), @p12='?' (DbType = Boolean), @p13='?' (Size = 100), @p14='?' (DbType = Int32), @p15='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [CreatedAt] = @p0, [Email] = @p1, [FailedLoginCount] = @p2, [FirstName] = @p3, [IsActive] = @p4, [IsEmailVerified] = @p5, [IsLocked] = @p6, [IsPhoneNumberVerified] = @p7, [LastLoginAt] = @p8, [LastName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [RememberMe] = @p12, [SalesPersonCode] = @p13, [UserRoleId] = @p14, [Username] = @p15
OUTPUT 1
WHERE [UserID] = @p16;
2025-06-09 18:46:40.102 +05:30 [INF] Updated the last login time for user: 10.
2025-06-09 18:46:41.535 +05:30 [WRN] API Response: {
  "ip": "::1",
  "bogon": true
}
2025-06-09 18:46:41.931 +05:30 [INF] Executed DbCommand (236ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 50), @p2='?' (Size = 50), @p3='?' (Size = 50), @p4='?' (Size = 255), @p5='?' (Size = 50), @p6='?' (DbType = Boolean), @p7='?' (Size = 50), @p8='?' (DbType = DateTime2), @p9='?' (Size = 50), @p10='?' (DbType = Boolean), @p11='?' (Size = 50), @p12='?' (Size = 255), @p13='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [LoginTrack] ([Browser], [City], [Country], [DeviceType], [FailureReason], [IPAddress], [IsSuccessful], [LoginMethod], [LoginTime], [MFAMethod], [MFAUsed], [OperatingSystem], [SessionID], [UserID])
OUTPUT INSERTED.[LoginTrackID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-06-09 18:46:48.431 +05:30 [INF] Executed DbCommand (241ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 18:46:48.437 +05:30 [INF] JWT token generated and stored for user 10.
2025-06-09 18:46:49.654 +05:30 [INF] Executed DbCommand (223ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTime2), @p5='?' (Size = 255), @p6='?' (Size = 1000), @p7='?' (Size = 50), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserToken] ([CreatedAt], [ExpiresAt], [IsRevoked], [IsUsed], [LastUsedAt], [Purpose], [Token], [TokenType], [UserID])
OUTPUT INSERTED.[TokenID]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 18:46:49.680 +05:30 [INF] Login successful without MFA for user: 10.
2025-06-09 18:46:49.696 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType4`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 18:46:49.714 +05:30 [INF] Executed action SriKanth.API.Controllers.UserController.Login (SriKanth.API) in 17343.741ms
2025-06-09 18:46:49.716 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.UserController.Login (SriKanth.API)'
2025-06-09 18:46:49.728 +05:30 [INF] Request finished HTTP/2 POST https://localhost:7168/api/User/login - 200 null application/json; charset=utf-8 17421.2081ms
2025-06-09 18:47:09.381 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 18:47:09.425 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:47:09.431 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 18:47:12.953 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 18:47:13.250 +05:30 [INF] Executed DbCommand (241ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 18:47:13.495 +05:30 [INF] Executed DbCommand (217ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 18:47:17.874 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:47:17.880 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:47:32.343 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:47:32.355 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:49:09.804 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:49:09.816 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:49:12.749 +05:30 [INF] Received HTTP response headers after 98509.5432ms - 200
2025-06-09 18:49:12.749 +05:30 [INF] Received HTTP response headers after 111938.1218ms - 200
2025-06-09 18:49:12.749 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:49:12.752 +05:30 [INF] End processing HTTP request after 100409.2565ms - 200
2025-06-09 18:49:12.752 +05:30 [INF] End processing HTTP request after 114880.85ms - 200
2025-06-09 18:49:12.753 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:49:14.443 +05:30 [INF] Received HTTP response headers after 4624.7136ms - 200
2025-06-09 18:49:15.777 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:49:15.778 +05:30 [INF] End processing HTTP request after 5974.291ms - 200
2025-06-09 18:49:15.788 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:49:16.674 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:49:16.674 +05:30 [INF] Received HTTP response headers after 3916.0727ms - 200
2025-06-09 18:49:16.680 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:49:16.738 +05:30 [INF] End processing HTTP request after 3988.5033ms - 200
2025-06-09 18:49:18.452 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:49:18.455 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:49:19.074 +05:30 [INF] Received HTTP response headers after 3282.5137ms - 200
2025-06-09 18:49:19.114 +05:30 [INF] End processing HTTP request after 3336.6324ms - 200
2025-06-09 18:49:19.899 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:49:19.902 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:49:20.419 +05:30 [INF] Received HTTP response headers after 1962.8848ms - 200
2025-06-09 18:49:20.422 +05:30 [INF] End processing HTTP request after 1970.1019ms - 200
2025-06-09 18:49:21.228 +05:30 [INF] Received HTTP response headers after 4460.6402ms - 200
2025-06-09 18:49:21.229 +05:30 [INF] Received HTTP response headers after 1323.6071ms - 200
2025-06-09 18:49:21.230 +05:30 [INF] End processing HTTP request after 4556.3544ms - 200
2025-06-09 18:49:21.233 +05:30 [INF] End processing HTTP request after 1333.5822ms - 200
2025-06-09 18:49:23.547 +05:30 [ERR] Failed to retrieve filtered order details for user 5
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 100 seconds elapsing.
 ---> System.TimeoutException: A task was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at System.Net.Http.HttpConnectionResponseContent.<SerializeToStreamAsync>g__Impl|6_0(Stream stream, CancellationToken cancellationToken)
   at System.Net.Http.HttpContent.LoadIntoBufferAsyncCore(Task serializeToStreamTask, MemoryStream tempBuffer)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at SriKanth.Service.SalesModule.ExternalApiService.GetAccessTokenAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 74
   at SriKanth.Service.SalesModule.ExternalApiService.GetDataFromApiAsync[T](String apiUrl) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 104
   at SriKanth.Service.SalesModule.ExternalApiService.GetLocationsAsync() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\ExternalApiService.cs:line 201
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 289
2025-06-09 18:49:23.863 +05:30 [INF] Executed DbCommand (217ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:49:23.874 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-09 18:49:23.879 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 134443.775ms
2025-06-09 18:49:23.880 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:49:23.883 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 500 null text/plain; charset=utf-8 134502.0754ms
2025-06-09 18:49:28.776 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - null null
2025-06-09 18:49:28.781 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:49:28.784 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 18:49:31.080 +05:30 [INF] Beginning to retrieve filtered order details for user 5
2025-06-09 18:49:31.407 +05:30 [INF] Executed DbCommand (235ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 18:49:31.644 +05:30 [INF] Executed DbCommand (231ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-06-09 18:50:51.491 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:50:51.501 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:51:08.475 +05:30 [INF] Received HTTP response headers after 16968.218ms - 200
2025-06-09 18:51:09.130 +05:30 [INF] End processing HTTP request after 17638.5269ms - 200
2025-06-09 18:51:26.979 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:51:26.999 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/locations
2025-06-09 18:51:34.463 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:51:34.465 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:51:35.274 +05:30 [INF] Received HTTP response headers after 5227.9379ms - 200
2025-06-09 18:51:35.297 +05:30 [INF] End processing HTTP request after 8317.2481ms - 200
2025-06-09 18:51:37.705 +05:30 [INF] Received HTTP response headers after 3239.4481ms - 200
2025-06-09 18:51:38.704 +05:30 [INF] End processing HTTP request after 4240.966ms - 200
2025-06-09 18:51:56.907 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:51:56.923 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/items?$expand=itemsubstitutions
2025-06-09 18:51:58.882 +05:30 [INF] Received HTTP response headers after 677.2526ms - 200
2025-06-09 18:52:08.064 +05:30 [INF] End processing HTTP request after 11170.2185ms - 200
2025-06-09 18:52:51.224 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:52:52.164 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/salesPrices
2025-06-09 18:52:53.934 +05:30 [INF] Received HTTP response headers after 1766.8461ms - 200
2025-06-09 18:52:55.124 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:52:55.127 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:52:55.126 +05:30 [INF] End processing HTTP request after 3901.9553ms - 200
2025-06-09 18:52:56.020 +05:30 [INF] Received HTTP response headers after 890.1392ms - 200
2025-06-09 18:52:56.022 +05:30 [INF] End processing HTTP request after 898.0442ms - 200
2025-06-09 18:52:57.400 +05:30 [INF] Retrieved filtered order details for user 5 with 1 locations, 262 customers, and 5 items
2025-06-09 18:52:58.473 +05:30 [INF] Executed DbCommand (228ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:52:58.479 +05:30 [INF] Executing OkObjectResult, writing value of type 'SriKanth.Model.BusinessModule.DTOs.OrderCreationDetails'.
2025-06-09 18:52:58.497 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 209711.6726ms
2025-06-09 18:52:58.500 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-06-09 18:52:58.502 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=5 - 200 null application/json; charset=utf-8 209725.6654ms
2025-06-09 18:54:11.146 +05:30 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=10 - application/json 322
2025-06-09 18:54:11.150 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 18:54:11.162 +05:30 [INF] Route matched with {action = "CreateOrder", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOrder(Int32, SriKanth.Model.BusinessModule.DTOs.OrderRequest) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-06-09 18:54:11.193 +05:30 [INF] Beginning order submission for user 10, customer 100, location RGM-SKM01
2025-06-09 18:54:11.420 +05:30 [INF] Executed DbCommand (223ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-06-09 18:54:38.941 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:54:38.943 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-06-09 18:54:39.503 +05:30 [INF] Received HTTP response headers after 558.3932ms - 200
2025-06-09 18:54:39.505 +05:30 [INF] End processing HTTP request after 563.6662ms - 200
2025-06-09 18:55:04.751 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:55:04.758 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/customers
2025-06-09 18:55:06.123 +05:30 [INF] Received HTTP response headers after 1362.7444ms - 200
2025-06-09 18:55:06.127 +05:30 [INF] End processing HTTP request after 1375.1125ms - 200
2025-06-09 18:55:18.747 +05:30 [INF] Exiting ValidateCustomerCredit with validation success
2025-06-09 18:55:18.754 +05:30 [INF] Entering ValidateInventory for location RGM-SKM01
2025-06-09 18:55:24.893 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:55:24.896 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/dev/api/asttrum/sales/v1.0/companies(b4dd4bba-0a23-f011-9af7-000d3a087c80)/inventoryBalances
2025-06-09 18:55:25.252 +05:30 [INF] Received HTTP response headers after 354.6155ms - 200
2025-06-09 18:55:25.254 +05:30 [INF] End processing HTTP request after 360.5532ms - 200
2025-06-09 18:55:26.569 +05:30 [INF] Exiting ValidateInventory with validation success
2025-06-09 18:55:26.865 +05:30 [INF] Executed DbCommand (226ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 1000), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000), @p5='?' (Size = 1000), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Order] ([CustomerCode], [LocationCode], [Note], [OrderDate], [PaymentMethodCode], [RejectReason], [SalesPersonCode], [Status], [TotalAmount])
OUTPUT INSERTED.[OrderNumber]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-06-09 18:55:27.157 +05:30 [INF] Executed DbCommand (252ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [OrderItem] ([Description], [DiscountPercent], [ItemCode], [OrderNumber], [Quantity], [UnitPrice])
OUTPUT INSERTED.[OrderItemId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:55:27.164 +05:30 [INF] Successfully submitted order 12 for customer 100 by user 10
2025-06-09 18:55:27.363 +05:30 [INF] Executed DbCommand (192ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-06-09 18:55:27.370 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-06-09 18:55:27.372 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API) in 76206.6505ms
2025-06-09 18:55:27.373 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.CreateOrder (SriKanth.API)'
2025-06-09 18:55:27.374 +05:30 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Business/CreateOrder?userId=10 - 200 null application/json; charset=utf-8 76228.1474ms
